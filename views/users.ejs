<%- include('./layouts/header')  %>
<%- include('./layouts/navbar')  %>
<h2 class="text-center mt-2">
   Les utilisteurs
   
        De Departement :
       <strong> </strong>
    
</h2>
<table class="table table-striped container mt-2">
    <thead>
      <tr>
        <th >Nom</th>
        <th >E-mail</th>
        <th >Date</th>
        <th >Action</th>
      </tr>
    </thead>
    <tbody>
         
      <% users.forEach(user => { %>
      <tr>
        <td >  <%-user.name %></td>
        <td> <%-user.email %></td>
        <td><%= user.createdAt.toISOString().substring(0, 10) %></td>
        <td><a data-toggle="modal" data-target="#update-utilisateur " class="text-info"><i class="fas fa-edit"></i></a> <a href="/delete_utilisateur/ " class="text-danger delete"> <i class="far fa-trash-alt"></i></a></td>
      </tr>
      <% }) %>
      <div class="modal fade" id="update-utilisateur" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
        <div class="modal-content">
         <div class="modal-header">
           <h3 class="modal-title" id="staticBackdropLabel">Modifier Utilisateur</h3>
           <button type="button" class="close btn btn-light" data-dismiss="modal" aria-label="Close">
           <i class="fas fa-times"></i>
           </button>
         </div>
         <div class="modal-body">
        <form method="POST" /<%-users.id %>" >
         <div class="card p-3 radius m-auto  " >
         <div class="card-body">
             <div class="form-group mt-2">
               <label for="">Nom :</label>
               <input type="text" value="<%= users.name %>" class="form-control" name="nom" required>
             </div>
             <div class="form-group mt-2">
               <label for="">E-mail :</label>
               <input type="email" value="<%= users.email %>" class="form-control" name="email"  required >
             </div>
             <div class="form-group mt-2 ">
               <label for="">Mot de passe :</label>
               <input type="password" value="<%= users.password %>" class="form-control col-lg-5 d-inline" name="password"  required >
             </div>
             <div class="form-group mt-2"> 
            <label for="">Departement :</label> 
            <select name="departement" class="form-select col-lg-5 d-inline" > 
                <option value="">Change le departement</option> 
               
                       <option value="<%= users.DepId %>"><></option>
                  
             </select>
             </div>
              <button type="submit" name="ajouter" class="btn mt-3 form-control btn-info btn-block">Modifier</button>
             </div>
           </div>
        </form>
        </div>
        </div>
        </div>
        </div>




  
    </tbody>
  </table>


  <div class="modal fade" id="add-utilisateur" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
    <div class="modal-content">
     <div class="modal-header">
       <h3 class="modal-title" id="staticBackdropLabel">Ajouter Utilisateur</h3>
       <button type="button" class="close btn btn-light" data-dismiss="modal" aria-label="Close">
       <i class="fas fa-times"></i>
       </button>
     </div>
     <div class="modal-body">
    <form method="POST" action="/user/" >
     <div class="card p-3 radius m-auto  " >
     <div class="card-body">
         <div class="form-group mt-2">
           <label for="nom">Nom :</label>
           <input type="text" class="form-control" name="nom" required>
         </div>
         <div class="form-group mt-2">
           <label for="email">E-mail :</label>
           <input type="email" class="form-control" name="email"  required >
         </div>
         <div class="form-group mt-2 ">
           <label for="">Mot de passe :</label>
           <input type="password" class="form-control col-lg-5 d-inline" name="password"  required >
         </div>
         <div class="form-group mt-2"> 
            <label for="">Departement :</label> 
            <select name="departement" class="form-select col-lg-5 d-inline" required >
               <% deps.forEach(dep => { %> 
                <option>  <%-dep.name %> </option>
               
                <% }) %>
                      
            </select>
         </div>
          <button type="submit" name="ajouter" class="btn mt-3 form-control btn-info btn-block">Ajouter</button>
         </div>
       </div>
    </form>
    </div>
    </div>
    </div>
    </div>


<%- include('./layouts/footer')  %>